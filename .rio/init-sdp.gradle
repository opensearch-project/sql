// THIS FILE IS CREATED AND OVERWRITTEN BY setup-gradle.sh, DO NOT EDIT!
// MORE INFO: https://docs.aci.apple.com/artifactory/gradle.html#user-gradle-settings”

import org.gradle.util.GradleVersion
if (GradleVersion.current().baseVersion >= GradleVersion.version("3.6")) {
  def configure = { settings ->
    settings.pluginManagement {
      // This is needed to allow using custom Gradle plugins inside the plugins { } block.
      repositories {
        ["plugins-release", "plugins-snapshot"].forEach { repo ->
          maven {
            url = uri("${settings.artifactory_contextUrl}/$repo")
            credentials {
              username = "${settings.artifactory_user}"
              password = "${settings.artifactory_password}"
            }
          }
        }
      }
    }
  }
  if (GradleVersion.current().baseVersion >= GradleVersion.version("6.0")) {
    beforeSettings { configure(it) }
  } else {
    settingsEvaluated { configure(it) }
  }
}

allprojects {
  buildscript {
    repositories {
      ["plugins-release", "plugins-snapshot"].forEach { repo ->
        maven {
          url = uri("${artifactory_contextUrl}/$repo")
          credentials {
            username = "${artifactory_user}"
            password = "${artifactory_password}"
          }
        }
      }
    }
    configurations.all {
      resolutionStrategy {
        cacheChangingModulesFor 0, "seconds" // TTL for snapshots
        cacheDynamicVersionsFor 0, "seconds" // TTL for version selectors (e.g. `1.+`)
      }
    }
  }
  repositories {
    ["libs-release", "libs-snapshot"].forEach { repo ->
      maven {
        url = "${artifactory_contextUrl}/$repo"
        credentials {
          username = "${artifactory_user}"
          password = "${artifactory_password}"
        }
      }
    }
  }
  configurations.all {
    resolutionStrategy {
      cacheChangingModulesFor 0, "seconds" // TTL for snapshots
      cacheDynamicVersionsFor 0, "seconds" // TTL for version selectors (e.g. `1.+`)
    }
  }
}

// THIS FILE IS CREATED AND OVERWRITTEN BY setup-gradle.sh, DO NOT EDIT!
// MORE INFO: https://docs.aci.apple.com/artifactory/gradle.html#user-gradle-settings”
